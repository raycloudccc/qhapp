<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="test.dao.TeacherDao">
    <resultMap id="resultMap" type="test.entity.Teacher">
        <result property="teacherId" column="teacher_id"/>
        <result property="name" column="name"/>
        <result property="age" column="age"/>
        <result property="gender" column="gender"/>
        <result property="tele" column="tele"/>
        <result property="email" column="email"/>
        <result property="wxh" column="wxh"/>
        <result property="address" column="address"/>
        <result property="sub_id" column="sub_id"/>
        <result property="status" column="status"/>
        <result property="memo" column="memo"/>
        <result property="createtime" column="createtime"/>
    </resultMap>
    <parameterMap id="parameterMap" type="test.entity.Teacher">
        <parameter property="teacherId" resultMap="resultMap"/>
        <parameter property="name" resultMap="resultMap"/>
        <parameter property="age" resultMap="resultMap"/>
        <parameter property="gender" resultMap="resultMap"/>
        <parameter property="tele" resultMap="resultMap"/>
        <parameter property="email" resultMap="resultMap"/>
        <parameter property="wxh" resultMap="resultMap"/>
        <parameter property="address" resultMap="resultMap"/>
        <parameter property="sub_id" resultMap="resultMap"/>
        <parameter property="status" resultMap="resultMap"/>
        <parameter property="memo" resultMap="resultMap"/>
        <parameter property="createtime" resultMap="resultMap"/>
    </parameterMap>

    <sql id="columnSql">
            t.teacher_id,
            t.name,
            t.age,
            t.gender,
            t.tele,
            t.email,
            t.wxh,
            t.address,
            t.sub_id,
            t.status,
            t.memo,
            t.createtime

    </sql>


    <insert id="insertTeacher" parameterMap="parameterMap">
        INSERT INTO teacher (
        name,age,gender,tele,email,wxh,address,sub_id,status,memo,createtime
        )
        VALUES (#{name},#{age},#{gender},#{tele},#{email},#{wxh},#{address},#{sub_id},#{status},#{memo},#{createtime})
    </insert>

    <select id="listTeacher" resultType="test.entity.Teacher" parameterType="java.util.Map">
        SELECT
        <include refid="columnSql"/>,s.sub_name
        FROM teacher t
        LEFT JOIN subject s
        ON s.sub_id=t.sub_id
        WHERE t.status=#{status}
        LIMIT #{start},#{end}
    </select>

    <select id="countTeacher" parameterType="int" resultType="int">
        SELECT COUNT(*) FROM teacher WHERE status=#{_parameter}
    </select>

    <select id="allSub" resultType="test.entity.Subject">
        SELECT * FROM subject
    </select>

    <select id="selectTeacherById" parameterType="string" resultType="test.entity.Teacher">
        SELECT
        <include refid="columnSql"/>,s.sub_name
        FROM teacher t
        LEFT JOIN subject s
        ON s.sub_id=t.sub_id
        WHERE t.teacher_id=#{_parameter}
    </select>

    <update id="updateTeacher" parameterType="test.entity.Teacher">
        UPDATE teacher SET name=#{name},age=#{age},gender=#{gender},tele=#{tele},email=#{email},wxh=#{wxh},address=#{address},
        sub_id=#{sub_id},memo=#{memo} WHERE teacher_id=#{teacher_id}
    </update>

    <delete id="deleteTeacher" parameterType="string">
        DELETE from teacher WHERE teacher_id=#{_parameter}
    </delete>
</mapper>
